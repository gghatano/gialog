<!DOCTYPE html><html><head><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><title>ABC098-D XOR sum 2 </title><meta name="next-head-count" content="3"/><link rel="preload" href="/gialog/_next/static/css/4203b26684364480.css" as="style"/><link rel="stylesheet" href="/gialog/_next/static/css/4203b26684364480.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/gialog/_next/static/chunks/polyfills-5cd94c89d3acac5f.js"></script><script src="/gialog/_next/static/chunks/webpack-b6d3dfeededadb8a.js" defer=""></script><script src="/gialog/_next/static/chunks/framework-1f10003e17636e37.js" defer=""></script><script src="/gialog/_next/static/chunks/main-081902de2ec959a7.js" defer=""></script><script src="/gialog/_next/static/chunks/pages/_app-f3235808ea13ce61.js" defer=""></script><script src="/gialog/_next/static/chunks/582-d79da0492f1f9267.js" defer=""></script><script src="/gialog/_next/static/chunks/pages/articles/%5BissueNumber%5D-1bcd5005fc9533d6.js" defer=""></script><script src="/gialog/_next/static/qtHbqj2enyTb-RNfYyrxe/_buildManifest.js" defer=""></script><script src="/gialog/_next/static/qtHbqj2enyTb-RNfYyrxe/_ssgManifest.js" defer=""></script><script src="/gialog/_next/static/qtHbqj2enyTb-RNfYyrxe/_middlewareManifest.js" defer=""></script></head><body><div id="__next"><div class="min-h-screen bg-gray-50 dark:bg-gray-800 dark:text-gray-100"><header class="container mx-auto max-w-2xl px-8 py-12"><nav><p><a class="font-bold text-gray-900 visited:text-gray-900 dark:text-gray-300 dark:visited:text-gray-300" href="/gialog">300億円ほしい</a></p></nav></header><main class="container mx-auto max-w-2xl px-8 py-12 shadow-md bg-white dark:bg-gray-900"><div class="divide-y divide-gray-300 dark:divide-gray-700"><article class="markdown"><header><time dateTime="2023-06-05T09:41:03Z" title="2023-06-05T09:41:03Z" class="block text-[.8rem] text-gray-500 dark:text-gray-400">2023-06-05</time><h1>ABC098-D XOR sum 2 </h1></header><aside class="block text-[.8rem] text-gray-500 dark:text-gray-400"><p>Posted by <!-- --><a href="https://github.com/gghatano">gghatano</a> at <!-- --><a href="https://github.com/gghatano/gialog/issues/34">#34</a>.<!-- --></p></aside><div><h2>概要</h2>
<ul>
<li>問題は<a href="https://atcoder.jp/contests/abc098/tasks/arc098_b">これ</a></li>
<li>提出結果は<a href="https://atcoder.jp/contests/abc098/submissions/42018477">WA</a></li>
<li>何が悪いのかわからん</li>
</ul>
<pre><code class="language-python">#!/usr/bin/python3
import sys
# import bisect,collections,copy,heapq,itertools,math,numpy,string
sys.setrecursionlimit(10**6)
input = lambda: sys.stdin.readline().rstrip()
from collections import defaultdict, deque


def main():
    N = int(input())
    A = list(map(int, input().split()))
    dq = deque()
    
    now = 0
    ans = 0

    for a in A:
        ans += 1

        if len(dq) > 0 and now ^ a == now + a:
            ans += len(dq)
        
        while len(dq) > 0 and now ^ a != now + a:
            pop = dq.pop()
            now ^= pop
        
        now += a 
        dq.appendleft(a)
    
    print(ans)
            
    return(0)

if __name__ == '__main__':
 main()

</code></pre>
<h2>考えたこと</h2>
<ul>
<li>しゃくとり法
<ul>
<li>A xor B == A + B は、bit表示したときに、桁あふれがない、ということ</li>
<li>A,B,C で桁あふれがなければ、A,B、B,Cでもあふれない</li>
<li>しゃくとり法で、nowにaを追加するとき、now xor a == now + a なら、len(dq)だけ答えに追加する</li>
<li>条件を満たさなかったら、満たすまで、nowから削る
<ul>
<li>xorの逆演算は、xor。削るときには、xorで足せばいい</li>
</ul>
</li>
</ul>
</li>
</ul></div></article></div></main><footer class="container mx-auto max-w-2xl px-8 py-12 text-sm"><nav><ul class="flex flex-row gap-6 justify-center"><li><a class="text-gray-900 visited:text-gray-900 dark:text-gray-300 dark:visited:text-gray-300" href="https://github.com/gghatano/gialog">Repository</a></li></ul></nav></footer></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"issue":{"body":"## 概要\r\n- 問題は[これ](https://atcoder.jp/contests/abc098/tasks/arc098_b)\r\n- 提出結果は[WA](https://atcoder.jp/contests/abc098/submissions/42018477)\r\n- 何が悪いのかわからん\r\n\r\n```python\r\n#!/usr/bin/python3\r\nimport sys\r\n# import bisect,collections,copy,heapq,itertools,math,numpy,string\r\nsys.setrecursionlimit(10**6)\r\ninput = lambda: sys.stdin.readline().rstrip()\r\nfrom collections import defaultdict, deque\r\n\r\n\r\ndef main():\r\n    N = int(input())\r\n    A = list(map(int, input().split()))\r\n    dq = deque()\r\n    \r\n    now = 0\r\n    ans = 0\r\n\r\n    for a in A:\r\n        ans += 1\r\n\r\n        if len(dq) \u003e 0 and now ^ a == now + a:\r\n            ans += len(dq)\r\n        \r\n        while len(dq) \u003e 0 and now ^ a != now + a:\r\n            pop = dq.pop()\r\n            now ^= pop\r\n        \r\n        now += a \r\n        dq.appendleft(a)\r\n    \r\n    print(ans)\r\n            \r\n    return(0)\r\n\r\nif __name__ == '__main__':\r\n main()\r\n\r\n```\r\n\r\n## 考えたこと\r\n- しゃくとり法\r\n  - A xor B == A + B は、bit表示したときに、桁あふれがない、ということ\r\n  - A,B,C で桁あふれがなければ、A,B、B,Cでもあふれない\r\n  - しゃくとり法で、nowにaを追加するとき、now xor a == now + a なら、len(dq)だけ答えに追加する\r\n  - 条件を満たさなかったら、満たすまで、nowから削る\r\n    - xorの逆演算は、xor。削るときには、xorで足せばいい  ","bodyHTML":"\u003ch2\u003e概要\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003e問題は\u003ca href=\"https://atcoder.jp/contests/abc098/tasks/arc098_b\"\u003eこれ\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e提出結果は\u003ca href=\"https://atcoder.jp/contests/abc098/submissions/42018477\"\u003eWA\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e何が悪いのかわからん\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre\u003e\u003ccode class=\"language-python\"\u003e#!/usr/bin/python3\r\nimport sys\r\n# import bisect,collections,copy,heapq,itertools,math,numpy,string\r\nsys.setrecursionlimit(10**6)\r\ninput = lambda: sys.stdin.readline().rstrip()\r\nfrom collections import defaultdict, deque\r\n\r\n\r\ndef main():\r\n    N = int(input())\r\n    A = list(map(int, input().split()))\r\n    dq = deque()\r\n    \r\n    now = 0\r\n    ans = 0\r\n\r\n    for a in A:\r\n        ans += 1\r\n\r\n        if len(dq) \u003e 0 and now ^ a == now + a:\r\n            ans += len(dq)\r\n        \r\n        while len(dq) \u003e 0 and now ^ a != now + a:\r\n            pop = dq.pop()\r\n            now ^= pop\r\n        \r\n        now += a \r\n        dq.appendleft(a)\r\n    \r\n    print(ans)\r\n            \r\n    return(0)\r\n\r\nif __name__ == '__main__':\r\n main()\r\n\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch2\u003e考えたこと\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003eしゃくとり法\n\u003cul\u003e\n\u003cli\u003eA xor B == A + B は、bit表示したときに、桁あふれがない、ということ\u003c/li\u003e\n\u003cli\u003eA,B,C で桁あふれがなければ、A,B、B,Cでもあふれない\u003c/li\u003e\n\u003cli\u003eしゃくとり法で、nowにaを追加するとき、now xor a == now + a なら、len(dq)だけ答えに追加する\u003c/li\u003e\n\u003cli\u003e条件を満たさなかったら、満たすまで、nowから削る\n\u003cul\u003e\n\u003cli\u003exorの逆演算は、xor。削るときには、xorで足せばいい\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e","active_lock_reason":null,"assignee":null,"assignees":[],"author_association":"OWNER","closed_at":null,"comments":0,"comments_url":"https://api.github.com/repos/gghatano/gialog/issues/34/comments","created_at":"2023-06-05T09:41:03Z","events_url":"https://api.github.com/repos/gghatano/gialog/issues/34/events","html_url":"https://github.com/gghatano/gialog/issues/34","id":1741392516,"labels":[],"labels_url":"https://api.github.com/repos/gghatano/gialog/issues/34/labels{/name}","locked":false,"milestone":null,"node_id":"I_kwDOH0C-AM5ny4qE","number":34,"performed_via_github_app":null,"reactions":{"+1":0,"-1":0,"confused":0,"eyes":0,"heart":0,"hooray":0,"laugh":0,"rocket":0,"total_count":0,"url":"https://api.github.com/repos/gghatano/gialog/issues/34/reactions"},"repository_url":"https://api.github.com/repos/gghatano/gialog","state":"open","state_reason":null,"timeline_url":"https://api.github.com/repos/gghatano/gialog/issues/34/timeline","title":"ABC098-D XOR sum 2 ","updated_at":"2023-06-05T09:41:03Z","url":"https://api.github.com/repos/gghatano/gialog/issues/34","user":{"avatar_url":"https://avatars.githubusercontent.com/u/5264958?v=4","events_url":"https://api.github.com/users/gghatano/events{/privacy}","followers_url":"https://api.github.com/users/gghatano/followers","following_url":"https://api.github.com/users/gghatano/following{/other_user}","gists_url":"https://api.github.com/users/gghatano/gists{/gist_id}","gravatar_id":"","html_url":"https://github.com/gghatano","id":5264958,"login":"gghatano","node_id":"MDQ6VXNlcjUyNjQ5NTg=","organizations_url":"https://api.github.com/users/gghatano/orgs","received_events_url":"https://api.github.com/users/gghatano/received_events","repos_url":"https://api.github.com/users/gghatano/repos","site_admin":false,"starred_url":"https://api.github.com/users/gghatano/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gghatano/subscriptions","type":"User","url":"https://api.github.com/users/gghatano"}},"issueComments":[]},"__N_SSG":true},"page":"/articles/[issueNumber]","query":{"issueNumber":"34"},"buildId":"qtHbqj2enyTb-RNfYyrxe","assetPrefix":"/gialog","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>